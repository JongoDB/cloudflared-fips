# cloudflared-fips configuration
# Generated by cloudflared-fips setup wizard

# Fleet role: controller owns the Cloudflare tunnel and routes traffic
# to compliant origin servers.
role: controller

# Cloudflare tunnel (controller-owned)
tunnel_token: ""  # REQUIRED â€” from cloudflared tunnel token <ID>
protocol: quic
grace-period: 30s
deployment_tier: standard

# Compliance enforcement policy
compliance_policy:
    enforcement_mode: audit  # enforce | audit | disabled
    require_os_fips: false
    require_disk_encryption: false
    grace_period_sec: 300

# Fleet admin key (auto-generated if empty)
fleet_admin_key: ""

# Node identity
node_name: ""
node_region: ""

# FIPS self-test settings
fips:
    self-test-on-start: true
    fail-on-self-test-failure: true
    self-test-output: /var/log/cloudflared/selftest.json

# TLS transport settings
transport:
    min-tls-version: "1.2"
    max-tls-version: "1.3"

# FIPS-approved cipher suites
approved-cipher-suites:
    - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
    - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
    - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
    - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
    - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
    - TLS_AES_256_GCM_SHA384
    - TLS_AES_128_GCM_SHA256
    - TLS_CHACHA20_POLY1305_SHA256

curve-preferences:
    - P-256
    - P-384

# Ingress rules (controller routes traffic to registered servers)
ingress:
    - service: http_status:404

loglevel: info
logfile: /var/log/cloudflared/cloudflared.log
metrics: localhost:2000

# Dashboard settings (controller only)
dashboard:
    metrics-address: localhost:2000
    mdm:
        provider: none
